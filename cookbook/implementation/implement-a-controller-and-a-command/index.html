<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Implement a controller and a command - Elcodi Documentation</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Elcodi Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../quick-start/">Quick start</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../reference/attribute/">Attribute</a>
</li>

                        
                            
<li >
    <a href="../../../reference/banner/">Banner</a>
</li>

                        
                            
<li >
    <a href="../../../reference/cart-coupon/">Cart coupon</a>
</li>

                        
                            
<li >
    <a href="../../../reference/cart/">Cart</a>
</li>

                        
                            
<li >
    <a href="../../../reference/comment/">Comment</a>
</li>

                        
                            
<li >
    <a href="../../../reference/configuration/">Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../reference/coupon/">Coupon</a>
</li>

                        
                            
<li >
    <a href="../../../reference/">Home</a>
</li>

                        
                            
<li >
    <a href="../../../reference/sitemap/">Sitemap</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../components/attribute/">Attribute</a>
</li>

                        
                            
<li >
    <a href="../../../components/entity-translator/">Entity translator</a>
</li>

                        
                            
<li >
    <a href="../../../components/">Home</a>
</li>

                        
                            
<li >
    <a href="../../../components/menu/">Menu</a>
</li>

                        
                            
<li >
    <a href="../../../components/state-transition-machine/">State transition machine</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bundles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../bundles/attribute/">Attribute</a>
</li>

                        
                            
<li >
    <a href="../../../bundles/entity-translator/">Entity translator</a>
</li>

                        
                            
<li >
    <a href="../../../bundles/">Home</a>
</li>

                        
                            
<li >
    <a href="../../../bundles/menu/">Menu</a>
</li>

                        
                            
<li >
    <a href="../../../bundles/sitemap/">Sitemap</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Book <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../book/">Home</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Standards</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../book/standards/classes/">Classes</a>
</li>

        
            
<li >
    <a href="../../../book/standards/code/">Code</a>
</li>

        
            
<li >
    <a href="../../../book/standards/dependency-injection/">Dependency injection</a>
</li>

        
            
<li >
    <a href="../../../book/standards/packages-structure/">Packages structure</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Workflows</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../book/workflows/cart/">Cart</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Bundles</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../book/bundles/extensions/">Extensions</a>
</li>

        
            
<li >
    <a href="../../../book/bundles/plugins/">Plugins</a>
</li>

        
            
<li >
    <a href="../../../book/bundles/templates/">Templates</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Philosophy</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../book/philosophy/elcodi/">Elcodi</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../">Home</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Caveats</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../caveats/pull-request/">Pull request</a>
</li>

        
            
<li >
    <a href="../../caveats/running-test-suite/">Running test suite</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Installation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../installation/install-dependent-bundles/">Install dependent bundles</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Overwrite</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../overwrite/overwrite-a-entity/">Overwrite a entity</a>
</li>

        
            
<li >
    <a href="../../overwrite/overwrite-a-parameter/">Overwrite a parameter</a>
</li>

        
            
<li >
    <a href="../../overwrite/overwrite-a-service/">Overwrite a service</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Adapters</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../adapters/currency-rates-populator/">Currency rates populator</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Implementation</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Implement a controller and a command</a>
</li>

        
            
<li >
    <a href="../implement-a-factory/">Implement a factory</a>
</li>

        
            
<li >
    <a href="../implement-a-form-type/">Implement a form type</a>
</li>

        
            
<li >
    <a href="../implement-a-repository/">Implement a repository</a>
</li>

        
            
<li >
    <a href="../implement-an-entity/">Implement an entity</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../../adapters/currency-rates-populator/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../implement-a-factory/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#how-to-implement-a-controller-or-a-command">How to Implement a Controller or a Command</a></li>
        
            <li><a href="#services-in-elcodi">Services in Elcodi</a></li>
        
            <li><a href="#framework-controllers-in-bamboo">Framework Controllers in Bamboo</a></li>
        
            <li><a href="#framework-commands-in-bamboo">Framework Commands in Bamboo</a></li>
        
            <li><a href="#annotations-in-bamboo-controllers">Annotations in Bamboo Controllers</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="how-to-implement-a-controller-or-a-command">How to Implement a Controller or a Command</h1>
<p>Controllers and Commands in Elcodi are exactly the same than Controllers and 
Commands in Symfony. No difference between them. But in Elcodi we have a strong
philosophy about how to create them in order to be valid or usable in the Open
Source environment.</p>
<h3 id="services-in-elcodi">Services in Elcodi</h3>
<p>All Elcodi Controllers and Commands are defined as services. This is because we
are <em>Overwriting Oriented Programming</em> and we have in mind that every single
implementation sensible to be changed between projects must be easily 
customized.</p>
<p>In Symfony, and because Dependency Injection definition has a very well documented
overwriting strategy, we have decided that everything must be defined as a 
service.</p>
<p>We have a convention about how a Controller and a Command must be registered in
your DI container</p>
<pre><code class="yaml">elcodi.controller.image_upload
elcodi.command.populate_currency_rates
</code></pre>

<p>Of course, and because it should only depend on the Symfony Components, but never
the Symfony Framework nor the FrameworkBundle, both implementations must not extend
Framework classes.</p>
<h3 id="framework-controllers-in-bamboo">Framework Controllers in Bamboo</h3>
<p>When you work in Bamboo (or in your project on top of Elcodi Components and 
Bundles) we don't recommend the usage of Controllers and Commands as services.
We think that both implementations are Entry Points and should be Framework
related.</p>
<p>This means that your Controllers or Commands should never have business logic,
and should place all this logic in your service layer.</p>
<p>Having said that, we recommend the usage of <em>FrameworkBundle</em> Controller class to
endow your controllers with easy access to the DI container and a good set of
pre-built methods.</p>
<pre><code class="php">use Symfony\Bundle\FrameworkBundle\Controller\Controller;

/**
 * Cart controllers
 */
class CartController extends Controller
{
}
</code></pre>

<h3 id="framework-commands-in-bamboo">Framework Commands in Bamboo</h3>
<p>We have the same opinion for Commands and Controllers.</p>
<pre><code class="php">use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;

/**
 * Cart controllers
 */
class MyCommand extends ContainerAwareCommand
{
}
</code></pre>

<h3 id="annotations-in-bamboo-controllers">Annotations in Bamboo Controllers</h3>
<p>In Bamboo, we use annotations in all our controllers in order to make the code more
understandable and to focus only on business logic. Annotations solve
repetitive things and should be perfectly documented.</p>
<blockquote>
<p>Magic? Yes, of course, same magic than yml readers, than Container
compilation, than service builds... so what?</p>
</blockquote>
<p>For this reason, we are using 
<a href="http://github.com/mmoreram/ControllerExtraBundle">ControllerExtraBundle</a> and
<a href="https://github.com/sensiolabs/SensioFrameworkExtraBundle">SensioFrameworkExtraBundle</a>.</p>
<p>Let's see an example.</p>
<pre><code class="php">use Mmoreram\ControllerExtraBundle\Annotation\Entity as AnnotationEntity;
use Mmoreram\ControllerExtraBundle\Annotation\Form as AnnotationForm;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

/**
 * Cart controllers
 *
 * @Route(
 *      path = &quot;/cart&quot;,
 * )
 */
class CartController extends Controller
{
    /**
     * Cart view
     *
     * @param FormView      $formView Form view
     * @param CartInterface $cart     Cart
     *
     * @return Response Response
     *
     * @Route(
     *      path = &quot;&quot;,
     *      name = &quot;store_cart_view&quot;,
     *      methods = {&quot;GET&quot;}
     * )
     *
     * @AnnotationEntity(
     *      class = {
     *          &quot;factory&quot; = &quot;elcodi.wrapper.cart&quot;,
     *          &quot;method&quot; = &quot;loadCart&quot;,
     *          &quot;static&quot; = false,
     *      },
     *      name = &quot;cart&quot;
     * )
     * @AnnotationForm(
     *      class = &quot;store_cart_form_type_cart&quot;,
     *      name  = &quot;formView&quot;,
     *      entity = &quot;cart&quot;,
     * )
     */
    public function viewAction(
        FormView $formView,
        CartInterface $cart
    ) {
        // ...

        return $this-&gt;renderTemplate(
            'Pages:cart-view.html.twig',
            [
                // ...
            ]
        );
    }
}
</code></pre>

<p>You can find some documentation of both annotation packages</p>
<ul>
<li><a href="https://github.com/mmoreram/ControllerExtraBundle/blob/master/README.md">ControllerExtraBundle</a></li>
<li><a href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a></li>
</ul>
<p>Please, before using annotations in your project make sure that you know how
they work and how to use them. Read the documentation of both packages and try
to understand their meaning.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
