<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://www.elcodi.io/cookbook/overwrite/overwrite-an-entity/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">

        <title>Overwrite an entity - Elcodi Documentation</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">

        <link href="../../../css/elcodi.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../.."><img src="../../../img/elcodi.png" height="30" /></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                
                
                
                    
                        <li >
                            <a href="../../../quick-start/">Quick start</a>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Book <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../../book/cart-architecture/">Cart architecture</a>
</li>

                            
                                
<li >
    <a href="../../../book/category-architecture/">Category architecture</a>
</li>

                            
                                
<li >
    <a href="../../../book/commands/">Commands</a>
</li>

                            
                                
<li >
    <a href="../../../book/coupon-architecture/">Coupon architecture</a>
</li>

                            
                                
<li >
    <a href="../../../book/dictionary/">Dictionary</a>
</li>

                            
                                
<li >
    <a href="../../../book/emails/">Emails</a>
</li>

                            
                                
<li >
    <a href="../../../book/events/">Events</a>
</li>

                            
                                
<li >
    <a href="../../../book/">Home</a>
</li>

                            
                                
<li >
    <a href="../../../book/payments/">Payments</a>
</li>

                            
                                
<li >
    <a href="../../../book/philosophy/">Philosophy</a>
</li>

                            
                                
<li >
    <a href="../../../book/plugins/">Plugins</a>
</li>

                            
                                
<li >
    <a href="../../../book/processes/">Processes</a>
</li>

                            
                                
<li >
    <a href="../../../book/product-architecture/">Product architecture</a>
</li>

                            
                                
<li >
    <a href="../../../book/pull-requests/">Pull requests</a>
</li>

                            
                                
<li >
    <a href="../../../book/roadmap/">Roadmap</a>
</li>

                            
                                
<li >
    <a href="../../../book/running-test-suite/">Running test suite</a>
</li>

                            
                                
<li >
    <a href="../../../book/shipping/">Shipping</a>
</li>

                            
                                
<li >
    <a href="../../../book/standards/">Standards</a>
</li>

                            
                                
<li >
    <a href="../../../book/templates/">Templates</a>
</li>

                            
                                
<li >
    <a href="../../../book/translate-elcodi/">Translate elcodi</a>
</li>

                            
                                
<li >
    <a href="../../../book/vagrant-quick-start/">Vagrant quick start</a>
</li>

                            
                                
<li >
    <a href="../../../book/what-is-elcodi/">What is elcodi</a>
</li>

                            
                                
<li >
    <a href="../../../book/why-elcodi/">Why elcodi</a>
</li>

                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown active">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../">Home</a>
</li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Installation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../installation/install-a-plugin/">Install a plugin</a>
</li>

        
            
<li >
    <a href="../../installation/install-dependent-bundles/">Install dependent bundles</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Overwrite</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../overwrite-a-parameter/">Overwrite a parameter</a>
</li>

        
            
<li >
    <a href="../overwrite-a-service/">Overwrite a service</a>
</li>

        
            
<li class="active">
    <a href="./">Overwrite an entity</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Deprecation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../deprecation/deprecate-a-method/">Deprecate a method</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Adapters</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../adapters/currency-rates-populator/">Currency rates populator</a>
</li>

        
            
<li >
    <a href="../../adapters/image-resize/">Image resize</a>
</li>

        
            
<li >
    <a href="../../adapters/location-loader/">Location loader</a>
</li>

        
            
<li >
    <a href="../../adapters/location-populator/">Location populator</a>
</li>

        
            
<li >
    <a href="../../adapters/location-provider/">Location provider</a>
</li>

        
            
<li >
    <a href="../../adapters/metric-bucket/">Metric bucket</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Workflow</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../workflow/create-automatic-coupon/">Create automatic coupon</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Usage</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../usage/elcodi-watermark/">Elcodi watermark</a>
</li>

        
            
<li >
    <a href="../../usage/referrer-domain/">Referrer domain</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Implementation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../implementation/implement-a-collector/">Implement a collector</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-a-controller-and-a-command/">Implement a controller and a command</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-a-factory/">Implement a factory</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-a-form-type/">Implement a form type</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-a-repository/">Implement a repository</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-an-entity/">Implement an entity</a>
</li>

        
            
<li >
    <a href="../../implementation/implement-an-event-listener/">Implement an event listener</a>
</li>

        
    </ul>
  </li>

                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Component <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../../component/entity-translator/">Entity translator</a>
</li>

                            
                                
<li >
    <a href="../../../component/">Home</a>
</li>

                            
                                
<li >
    <a href="../../../component/media/">Media</a>
</li>

                            
                                
<li >
    <a href="../../../component/menu/">Menu</a>
</li>

                            
                                
<li >
    <a href="../../../component/metrics/">Metrics</a>
</li>

                            
                                
<li >
    <a href="../../../component/sitemap/">Sitemap</a>
</li>

                            
                                
<li >
    <a href="../../../component/state-transition-machine/">State transition machine</a>
</li>

                            
                                
<li >
    <a href="../../../component/template/">Template</a>
</li>

                            
                            </ul>
                        </li>
                    
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../overwrite-a-service/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../deprecation/deprecate-a-method/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/elcodi/docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#how-to-overwrite-an-entity">How to Overwrite an Entity</a></li>
        
            <li><a href="#scenario">Scenario</a></li>
        
            <li><a href="#solution">Solution</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="how-to-overwrite-an-entity">How to Overwrite an Entity<a class="headerlink" href="#how-to-overwrite-an-entity" title="Permanent link"> #</a></h1>
<p>Each project is completely different, right? Elcodi is just one approach to an
specific e-commerce problem, but one of our goals is to provide a way for
overwriting absolutely everything.</p>
<h2 id="scenario">Scenario<a class="headerlink" href="#scenario" title="Permanent link"> #</a></h2>
<p>Your E-commerce installation is great, but the Product implementation that 
Elcodi proposes to you as a base is not enough for your model requirements.</p>
<p>Your Product needs an extra flag called <code>promoted</code>, in order to assign an extra
promotional value from 0 to 1, and used when products are required for 
pagination. Your Product, based on Elcodi's one, should have this new field.</p>
<h2 id="solution">Solution<a class="headerlink" href="#solution" title="Permanent link"> #</a></h2>
<p>The solution is very easy. From this moment your Product implementation will be 
the one used in your project, instead of the old one. This means that you will
be able to extend it as much as you want without modifying the old one, just
extending or re-implementing it.</p>
<h3 id="extending-or-implementing">Extending or Implementing<a class="headerlink" href="#extending-or-implementing" title="Permanent link"> #</a></h3>
<p>Each entity has its own interface. It means that if you want to build your own
<code>Product</code>, for example, your new implementation will need to implement the 
existing ProductInterface, in that case, 
<code>Elcodi\Component\Product\Entity\Interfaces\ProductInterface</code>.</p>
<pre><code class="php">use Elcodi\Component\Product\Entity\Interfaces\ProductInterface;

/**
 * New Product implementation
 */
class NewProduct implements ProductInterface
{
    ...
}    
</code></pre>

<p>This is useful when you really want to implement another Product completely 
different than the old one, but with same specification.</p>
<p>You can also create a new entity extending the default Product implementation (at 
this point your new entity will be implementing this interface by default). The 
advantage is that you don't need to implement all the methods of the interface, 
but just overwrite those that you want to change.</p>
<p>Perfect if you only need to extend it.</p>
<pre><code class="php">use Elcodi\Component\Product\Entity\Product;

/**
 * New Product implementation
 */
class NewProduct extends Product
{
    /**
     * @var boolean
     *
     * Promoted value
     */
    protected $promoted;

     /**
      * Get promoted value
      *
      * @return float Promoted value
      */
     public function getPromoted()
     {
        return $this-&gt;promoted;
     }

     /**
      * Set promoted value
      *
      * @param float $promoted Promoted value
      *
      * @return $this Self object
      */
     public function setPromoted($promoted)
     {
        $this-&gt;promoted = $promoted;

        return $this;
     }
}    
</code></pre>

<p>Both ways are valid depending on your implementation needs, but given our needs,
we will use this one.</p>
<h3 id="using-this-new-implementation">Using this new implementation<a class="headerlink" href="#using-this-new-implementation" title="Permanent link"> #</a></h3>
<p>Once your new entity is implemented, you need to tell your application
about your new implementation.</p>
<p>Elcodi works with a project called 
<a href="https://github.com/mmoreram/SimpleDoctrineMapping">SimpleDoctrineMapping</a>. This
library enables each bundle to specify how its entities must be treated inside
the Symfony installation, instead of letting Doctrine decide this stuff using 
<code>auto_mapping=true</code>.</p>
<p>Each Elcodi Bundle uses this library, so you can overwrite this information 
through each Bundle configuration. Let's see how ProductBundle allows the user to
define this information by exposing its configuration.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            # Product entity implementing ProductInterface
            class: Elcodi\Component\Product\Entity\Product
            # Doctrine mapping file for this entity
            mapping_file: '@ElcodiProductBundle/Resources/config/doctrine/Product.orm.yml'
            # Doctrine manager name
            manager: default
            # Is this entity enabled?
            enabled: true
</code></pre>

<p>If you don't define anything, then these values are injected as default 
configuration values in ProductBundle, so this is the way of overwriting the 
definition to start using our new Product implementation.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            # Product entity implementing ProductInterface
            class: My\New\Bundle\Entity\NewProduct
</code></pre>

<p>And that's enough.</p>
<h3 id="changing-the-mapping-file">Changing the mapping file<a class="headerlink" href="#changing-the-mapping-file" title="Permanent link"> #</a></h3>
<p>Once you have changed your entity, or just using the default entity 
implementation, maybe you want to change the way the entity is mapped in your
database.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            # Product entity implementing ProductInterface
            class: My\New\Bundle\Entity\NewProduct
            # Doctrine mapping file for this entity
            mapping_file: '@MyNewBundle/Resources/config/doctrine/Product.orm.yml'
</code></pre>

<p>In Elcodi we are actually using <code>yml</code> files for such definition, but you can use
both <code>yml</code> and <code>xml</code> files.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            # Product entity implementing ProductInterface
            class: My\New\Bundle\Entity\NewProduct
            # Doctrine mapping file for this entity
            mapping_file: '@MyNewBundle/Resources/config/doctrine/Product.orm.xml'
</code></pre>

<p>The result will be the same, and the system will detect the file extension.</p>
<h3 id="overwriting-the-mapping-file">Overwriting the mapping file<a class="headerlink" href="#overwriting-the-mapping-file" title="Permanent link"> #</a></h3>
<p>Once you need to overwrite the mapping file, you need to do it completely. 
Doctrine implementation does not allow overwriting a mapping file, so you need
to copy/paste the old one and modify as you wish.</p>
<p>In fact, this is the best option. As long as you don't use anymore the mapping 
file proposed by Elcodi, then you should take the control of all the mapping 
file.</p>
<h3 id="using-another-entity-manager">Using another Entity Manager<a class="headerlink" href="#using-another-entity-manager" title="Permanent link"> #</a></h3>
<p>By default, all entities are managed by the default entity manager. You can 
change this behavior just overwriting this configuration value. The selected 
entity manager must exist in your Doctrine ORM definition.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            # Product entity implementing ProductInterface
            class: My\New\Bundle\Entity\NewProduct
            # Doctrine mapping file for this entity
            mapping_file: '@MyNewBundle/Resources/config/doctrine/Product.orm.yml'
            # Doctrine manager name
            manager: another_entity_manager
</code></pre>

<p>Take into account that related entities should share the same entity manager. 
For example, in this example, because <code>Product</code> is related to <code>Category</code>, it 
would be not possible to have both tables managed separately by two different 
managers.</p>
<h3 id="disabling-an-entity">Disabling an Entity<a class="headerlink" href="#disabling-an-entity" title="Permanent link"> #</a></h3>
<p>Maybe you want to disable a specific entity. The most used strategy would be not
to use this entity, even if the table is created, but we strongly think that 
your model must be considered an essential part of your implementation, so you 
can disable an entity with a single line.</p>
<pre><code class="yaml">elcodi_product:

    mapping:
        product:
            enabled: false
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright © 2014/2015 <a href="http://www.elcodi.io">Elcodi</a>. All rights reserved.</p>
            
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
