<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Entity - Elcodi Documentation</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Elcodi Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../quick-start/">Quick start</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../../reference/attribute/">Attribute</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/banner/">Banner</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/cart-coupon/">Cart coupon</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/cart/">Cart</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/comment/">Comment</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/configuration/">Configuration</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/coupon/">Coupon</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/">Home</a>
                            </li>
                        
                            <li >
                                <a href="../../../reference/sitemap/">Sitemap</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../../components/">Home</a>
                            </li>
                        
                            <li >
                                <a href="../../../components/sitemap/">Sitemap</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Book <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../../book/">Home</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/standards/classes/">Classes</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/standards/code/">Code</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/standards/dependency-injection/">Dependency injection</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/standards/packages-structure/">Packages structure</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/workflows/cart/">Cart</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/bundles/extensions/">Extensions</a>
                            </li>
                        
                            <li >
                                <a href="../../../book/philosophy/elcodi/">Elcodi</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../">Home</a>
                            </li>
                        
                            <li >
                                <a href="../../caveats/test-suite/">Test suite</a>
                            </li>
                        
                            <li >
                                <a href="../../installation/dependent-bundles/">Dependent bundles</a>
                            </li>
                        
                            <li class="active">
                                <a href="./">Entity</a>
                            </li>
                        
                            <li >
                                <a href="../parameter/">Parameter</a>
                            </li>
                        
                            <li >
                                <a href="../service/">Service</a>
                            </li>
                        
                            <li >
                                <a href="../../implementation/entity/">Entity</a>
                            </li>
                        
                            <li >
                                <a href="../../implementation/factory/">Factory</a>
                            </li>
                        
                            <li >
                                <a href="../../implementation/form-type/">Form type</a>
                            </li>
                        
                            <li >
                                <a href="../../implementation/repository/">Repository</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li >
                    <a rel="next" href="../../installation/dependent-bundles/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../parameter/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#how-to-overwrite-an-entity">How to Overwrite an Entity</a></li>
        
            <li><a href="#extending-or-implementing">Extending or Implementing</a></li>
        
            <li><a href="#using-this-new-implementation">Using this new implementation</a></li>
        
            <li><a href="#changing-the-mapping-file">Changing the mapping file</a></li>
        
            <li><a href="#using-another-entity-manager">Using another Entity Manager</a></li>
        
            <li><a href="#disabling-an-entity">Disabling an Entity</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="how-to-overwrite-an-entity">How to Overwrite an Entity</h1>
<p>Each project is completely different, right? Elcodi is just one approach to an
specific e-commerce problem, but one of our goals is to provide a way for
overwriting absolutely everything.</p>
<p>In this document we will show you how to properly overwrite any default entity
implementation with your own.</p>
<h3 id="extending-or-implementing">Extending or Implementing</h3>
<p>Each entity has its own interface. It means that if you want to build your own
<code>Cart</code>, for example, your new implementation will need to implement the existing
Cart interface, in that case, 
<code>Elcodi\Component\Cart\Entity\Interfaces\CartInterface</code>.</p>
<pre><code class="php">use Elcodi\Component\Cart\Entity\Interfaces\CartInterface;

/**
 * New Cart implementation
 */
class NewCart implements CartInterface
{

}    
</code></pre>

<p>You can also create a new entity extending the default Cart implementation (at this point
your new entity will be implementing this interface by default). The advantage is
that you don't need to implement all the methods of the interface, but just overwrite
those that you want to change.</p>
<pre><code class="php">use Elcodi\Component\Cart\Entity\Cart;

/**
 * New Cart implementation
 */
class NewCart extends Cart
{

}    
</code></pre>

<p>Both ways are valid depending on your implementation needs.</p>
<h3 id="using-this-new-implementation">Using this new implementation</h3>
<p>Once your new entity is implemented, you need to tell your application
about your new implementation.</p>
<p>Elcodi works with a project called 
<a href="https://github.com/mmoreram/SimpleDoctrineMapping">SimpleDoctrineMapping</a>. This
library enables each bundle to specify how its entities must be treated inside
the Symfony installation, instead of letting Doctrine decide this stuff using 
<code>auto_mapping=true</code>.</p>
<p>Each Elcodi Bundle uses this library, so you can overwrite this information 
through each Bundle configuration. Let's see how CartBundle allows the user to
define this information by exposing its configuration.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            # Cart entity implementing CartInterface
            class: Elcodi\Component\Cart\Entity\Cart
            # Doctrine mapping file for this entity
            mapping_file: '@ElcodiCartBundle/Resources/config/doctrine/Cart.orm.yml'
            # Doctrine manager name
            manager: default
            # Is this entity enabled?
            enabled: true
</code></pre>

<p>If you don't define anything, then these values are injected as default 
configuration values in CartBundle, so this is the way of overwriting the 
definition to start using our new Cart implementation.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            # Cart entity implementing CartInterface
            class: My\New\Bundle\Entity\NewCart
</code></pre>

<p>And that's enough.</p>
<h3 id="changing-the-mapping-file">Changing the mapping file</h3>
<p>Once you have changed your entity, or just using the default entity 
implementation, maybe you want to change the way the entity is mapped in your
database.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            # Doctrine mapping file for this entity
            mapping_file: '@MyNewBundle/Resources/config/doctrine/Cart.orm.yml'
</code></pre>

<p>In Elcodi we are actually using <code>yml</code> files for such definition, but you can use
both <code>yml</code> and <code>xml</code> files.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            # Doctrine mapping file for this entity
            mapping_file: '@MyNewBundle/Resources/config/doctrine/Cart.orm.xml'
</code></pre>

<p>The result will be the same, and the system will detect the file extension.</p>
<h3 id="using-another-entity-manager">Using another Entity Manager</h3>
<p>By default, all entities are managed by the default entity manager. You can 
change this behavior just overwriting this configuration value. The selected entity
manager must exist in your Doctrine ORM definition.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            # Doctrine manager name
            manager: another_entity_manager
</code></pre>

<p>Take into account that related entities should share the same entity manager. For
example, in this example, because <code>Cart</code> has several <code>CartLine</code> instances, it
would be not possible to have both tables managed separately by two different
managers.</p>
<h3 id="disabling-an-entity">Disabling an Entity</h3>
<p>Maybe you want to disable a specific entity. The most used strategy would be not
to use this entity, even if the table is created, but we strongly think that 
your model must be considered an essential part of your implementation, so you 
can disable an entity with a single line.</p>
<pre><code class="yaml">elcodi_cart:

    mapping:
        cart:
            enabled: false
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script src="../../../js/base.js"></script>

        <!--
        MkDocs version  : 0.12.1
        Docs Build Date : 2015-04-18 22:26:10.061864
        -->
    </body>
</html>